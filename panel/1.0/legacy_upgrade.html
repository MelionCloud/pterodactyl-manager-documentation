<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Legacy Upgrades | PterodactylManager</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#0e4688">
    <link rel="manifest" href="/favicons/site.webmanifest">
    <link rel="shortcut icon" href="/favicons/favicon.ico">
    <meta name="description" content="PterodactylManager aims to help out in every aspect of pterodactyl addon development and integration.">
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">
    <meta name="theme-color" content="#0e4688">
    
    <link rel="preload" href="/assets/css/0.styles.baa88167.css" as="style"><link rel="preload" href="/assets/js/app.5c327c7a.js" as="script"><link rel="preload" href="/assets/js/4.2292f8c0.js" as="script"><link rel="preload" href="/assets/js/1.2845a406.js" as="script"><link rel="preload" href="/assets/js/67.5ff67096.js" as="script"><link rel="prefetch" href="/assets/js/10.6e48ed80.js"><link rel="prefetch" href="/assets/js/11.53217705.js"><link rel="prefetch" href="/assets/js/12.12802391.js"><link rel="prefetch" href="/assets/js/13.bd04c4ec.js"><link rel="prefetch" href="/assets/js/14.f2be742e.js"><link rel="prefetch" href="/assets/js/15.4a72db53.js"><link rel="prefetch" href="/assets/js/16.c4f07ce8.js"><link rel="prefetch" href="/assets/js/17.e3b378b0.js"><link rel="prefetch" href="/assets/js/18.fcb158a9.js"><link rel="prefetch" href="/assets/js/19.2f12d5ee.js"><link rel="prefetch" href="/assets/js/2.21e1a937.js"><link rel="prefetch" href="/assets/js/20.92c72a50.js"><link rel="prefetch" href="/assets/js/21.baa2bb0d.js"><link rel="prefetch" href="/assets/js/22.db83ce68.js"><link rel="prefetch" href="/assets/js/23.3a0120cf.js"><link rel="prefetch" href="/assets/js/24.bb5e07f8.js"><link rel="prefetch" href="/assets/js/25.5a8ed612.js"><link rel="prefetch" href="/assets/js/26.0b63e77f.js"><link rel="prefetch" href="/assets/js/27.0711df74.js"><link rel="prefetch" href="/assets/js/28.a4b7d21d.js"><link rel="prefetch" href="/assets/js/29.04661b23.js"><link rel="prefetch" href="/assets/js/30.4867d8e3.js"><link rel="prefetch" href="/assets/js/31.af3067e9.js"><link rel="prefetch" href="/assets/js/32.c9a7719c.js"><link rel="prefetch" href="/assets/js/33.5212ba26.js"><link rel="prefetch" href="/assets/js/34.bae1c3d9.js"><link rel="prefetch" href="/assets/js/35.c9e87aac.js"><link rel="prefetch" href="/assets/js/36.738d2ae6.js"><link rel="prefetch" href="/assets/js/37.df954409.js"><link rel="prefetch" href="/assets/js/38.8014c1ae.js"><link rel="prefetch" href="/assets/js/39.d1e0976c.js"><link rel="prefetch" href="/assets/js/40.6726a903.js"><link rel="prefetch" href="/assets/js/41.e352cd67.js"><link rel="prefetch" href="/assets/js/42.78eb98c9.js"><link rel="prefetch" href="/assets/js/43.ed2ecdbf.js"><link rel="prefetch" href="/assets/js/44.5f0d70c0.js"><link rel="prefetch" href="/assets/js/45.476a4a2e.js"><link rel="prefetch" href="/assets/js/46.ee5cf094.js"><link rel="prefetch" href="/assets/js/47.e051a563.js"><link rel="prefetch" href="/assets/js/48.4caed68e.js"><link rel="prefetch" href="/assets/js/49.cd869409.js"><link rel="prefetch" href="/assets/js/5.44ab9dcf.js"><link rel="prefetch" href="/assets/js/50.addc0992.js"><link rel="prefetch" href="/assets/js/51.7443a58a.js"><link rel="prefetch" href="/assets/js/52.2f4b770d.js"><link rel="prefetch" href="/assets/js/53.0ca9a201.js"><link rel="prefetch" href="/assets/js/54.945ee024.js"><link rel="prefetch" href="/assets/js/55.289d56f2.js"><link rel="prefetch" href="/assets/js/56.ab55a449.js"><link rel="prefetch" href="/assets/js/57.0242fab2.js"><link rel="prefetch" href="/assets/js/58.3238ddb5.js"><link rel="prefetch" href="/assets/js/59.afce34e2.js"><link rel="prefetch" href="/assets/js/6.69cad4a3.js"><link rel="prefetch" href="/assets/js/60.979bfcd1.js"><link rel="prefetch" href="/assets/js/61.f97c95bc.js"><link rel="prefetch" href="/assets/js/62.6705fe99.js"><link rel="prefetch" href="/assets/js/63.163f3a46.js"><link rel="prefetch" href="/assets/js/64.dbdbe3bb.js"><link rel="prefetch" href="/assets/js/65.25b5faeb.js"><link rel="prefetch" href="/assets/js/66.5b97f9bb.js"><link rel="prefetch" href="/assets/js/68.72d70dd2.js"><link rel="prefetch" href="/assets/js/69.ecf66330.js"><link rel="prefetch" href="/assets/js/7.20999763.js"><link rel="prefetch" href="/assets/js/70.9ad6304e.js"><link rel="prefetch" href="/assets/js/71.351bae51.js"><link rel="prefetch" href="/assets/js/72.7bde7525.js"><link rel="prefetch" href="/assets/js/73.79b75287.js"><link rel="prefetch" href="/assets/js/74.8f62d004.js"><link rel="prefetch" href="/assets/js/75.c68093f7.js"><link rel="prefetch" href="/assets/js/76.bf80f7ec.js"><link rel="prefetch" href="/assets/js/77.4f511f5c.js"><link rel="prefetch" href="/assets/js/8.47bf608e.js"><link rel="prefetch" href="/assets/js/9.2e97a47e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.baa88167.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container"><header class="nav"><div class="sidebar-button block md:hidden flex-no-shrink"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <div class="logo-container"><a href="/" class="home-link router-link-active"><img src="/logos/pterry.svg" class="logo"> <span class="site-name hidden md:inline can-hide">PterodactylManager</span></a></div> <div class="w-full"><div class="flex"><div class="search-box"><input aria-label="Search" placeholder="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links flex-no-shrink hidden md:flex"><div class="nav-item"><a href="/project/introduction.html" class="nav-link">Documentation
</a></div><div class="nav-item"><a href="https://discord.gg/devsky" target="_blank" rel="noopener noreferrer" class="nav-link external">
    Get Help
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <div class="nav-item"><a href="https://github.com/pterodactyl/panel" target="_blank" rel="noopener noreferrer" class="nav-link">
            GitHub
            <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav></div></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links flex-no-shrink block md:hidden"><div class="nav-item"><a href="/project/introduction.html" class="nav-link">Documentation
</a></div><div class="nav-item"><a href="https://discord.gg/devsky" target="_blank" rel="noopener noreferrer" class="nav-link external">
    Get Help
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <div class="nav-item"><a href="https://github.com/pterodactyl/panel" target="_blank" rel="noopener noreferrer" class="nav-link">
            GitHub
            <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Project Information</span> <!----> <!----></p> <ul class="sidebar-group-items"><li><a href="/project/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/project/about.html" class="sidebar-link">About</a></li><li><a href="/project/terms.html" class="sidebar-link">Terminology</a></li><li><a href="/project/community.html" class="sidebar-link">Community Standards</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Development Guides</span> <!----> <!----></p> <ul class="sidebar-group-items"><li><a href="/developer/guidelines.html" class="sidebar-link">🗿 Addon Structure</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content content__default"><h1 id="legacy-upgrades"><a href="#legacy-upgrades" class="header-anchor">#</a> Legacy Upgrades</h1> <p>This upgrade guide is for <strong>upgrading from 0.7.X to 1.3.x</strong>. If you are trying to do an upgrade on a 1.X Panel
please <a href="/panel/1.0/updating.html">use this guide instead</a>. During this upgrade process you will have some periods
of Panel unavailability, however none of the underlying game server instances will be stopped.</p> <h2 id="enter-maintenance-mode"><a href="#enter-maintenance-mode" class="header-anchor">#</a> Enter Maintenance Mode</h2> <p>You'll want to put your Panel into maintenance mode by running the <code>down</code> command below before starting. This
will prevent users from accessing the Panel during a period where things will be broken or not working correctly. Make sure that you're in the <code>/var/www/pterodactyl</code> directory when executing the command.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Put the Panel into maintenance mode and deny user access</span>
php artisan down
</code></pre></div><h2 id="update-dependencies"><a href="#update-dependencies" class="header-anchor">#</a> Update Dependencies</h2> <p>You'll need to make sure your system dependencies are up to date before performing this upgrade. Please
reference the list below to ensure you have all of the required versions.</p> <ul><li>PHP <code>7.4</code>, <code>8.0</code> or <code>8.1</code> (recommended) with the following extensions: <code>cli</code>, <code>openssl</code>, <code>gd</code>, <code>mysql</code>, <code>PDO</code>, <code>mbstring</code>,
<code>tokenizer</code>, <code>bcmath</code>, <code>xml</code> or <code>dom</code>, <code>curl</code>, <code>zip</code>, and <code>fpm</code> if you are planning to use nginx. See our guide
for <a href="/guides/php_upgrade.html">Upgrading PHP</a> for details.</li> <li>Composer v2 (<code>composer self-update --2</code>)</li></ul> <div class="custom-block warning"><p class="custom-block-title">Nginx</p> <p>If you upgrade your PHP version and are using nginx as your webserver, you will have to update the
<code>fastcgi_pass</code> value in your nginx's <code>pterodactyl.conf</code> configuration to use the correct <code>php-fpm</code> socket.</p></div> <ul><li>MySQL <code>5.7.22</code> or higher (MySQL <code>8</code> recommended) <strong>or</strong> MariaDB <code>10.2</code> or higher.</li></ul> <div class="custom-block warning"><p class="custom-block-title">Seriously, Double Check your Database Version</p> <p>Please make sure you are running the correct version of MariaDB or MySQL listed above! Failure to do so <em>will</em>
result in an error when you attempt to run the migrations.</p> <p>Previous documentation (and just the age of this software) likely had you installing MariaDB 10.1 which <em>will not
work</em> with this version of Pterodactyl.</p></div> <h2 id="fetch-updated-files"><a href="#fetch-updated-files" class="header-anchor">#</a> Fetch Updated Files</h2> <p>The first step in the update process is to download the new panel files from GitHub. The command below will download
the release archive for the most recent version of Pterodactyl and save it in the current directory. Now is a good time
to ensure that you're in the <code>/var/www/pterodactyl</code> directory as the command below will automatically unpack the archive
into your current folder.</p> <p>We will also be deleting the <code>app/</code> directory. Because of the way we handle installations and upgrades deleted files
are not always detected properly, so simply uppacking over this location will result in some confusing behavior.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Delete the app directory to ensure we start with a clean slate here. This will not affect any</span>
<span class="token comment"># of your settings or servers.</span>
<span class="token function">curl</span> -L -o panel.tar.gz https://github.com/pterodactyl/panel/releases/latest/download/panel.tar.gz
<span class="token function">rm</span> -rf <span class="token variable"><span class="token variable">$(</span><span class="token function">find</span> app public resources -depth <span class="token operator">|</span> <span class="token function">head</span> -n -1 <span class="token operator">|</span> <span class="token function">grep</span> -Fv <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">tar</span> -tf panel.tar.gz<span class="token variable">)</span></span>&quot;</span><span class="token variable">)</span></span>

<span class="token comment"># Download the updated files and delete the archive file.</span>
<span class="token function">tar</span> -xzvf panel.tar.gz <span class="token operator">&amp;&amp;</span> <span class="token function">rm</span> -f panel.tar.gz
</code></pre></div><p>Once all of the files are downloaded we need to set the correct permissions on the cache and storage directories to avoid
any webserver related errors.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">chmod</span> -R <span class="token number">755</span> storage/* bootstrap/cache
</code></pre></div><h2 id="update-dependencies-2"><a href="#update-dependencies-2" class="header-anchor">#</a> Update Dependencies</h2> <p>After you've downloaded all of the new files you will need to upgrade the core components of the panel. To do this,
simply run the commands below and follow any prompts.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>composer <span class="token function">install</span> --no-dev --optimize-autoloader
</code></pre></div><h2 id="clear-compiled-template-cache"><a href="#clear-compiled-template-cache" class="header-anchor">#</a> Clear Compiled Template Cache</h2> <p>You'll also want to clear the compiled template cache to ensure that new and modified templates show up correctly for
users.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan view:clear
php artisan config:clear
</code></pre></div><h2 id="database-updates"><a href="#database-updates" class="header-anchor">#</a> Database Updates</h2> <p>You'll also need to update your database schema for the newest version of Pterodactyl. Running the two commands below
will update the schema and ensure the default eggs we ship are up to date (and add any new ones we might have). Just
remember, <em>never edit core eggs we ship</em>! They will be overwritten by this update process.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>If you used a custom plugin that allowed for server transfers on <code>0.7</code> you <strong>MUST</strong> delete or rename the <code>server_transfers</code> table
before continuing.</p></div> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan migrate --force
php artisan db:seed --force
</code></pre></div><h2 id="set-permissions"><a href="#set-permissions" class="header-anchor">#</a> Set Permissions</h2> <p>The last step is to set the proper owner of the files to be the user that runs your webserver. In most cases this
is <code>www-data</code> but can vary from system to system — sometimes being <code>nginx</code>, <code>apache</code>, or even <code>nobody</code>.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># If using NGINX or Apache (not on CentOS):</span>
<span class="token function">chown</span> -R www-data:www-data *

<span class="token comment"># If using NGINX on CentOS:</span>
<span class="token function">chown</span> -R nginx:nginx *

<span class="token comment"># If using Apache on CentOS</span>
<span class="token function">chown</span> -R apache:apache *
</code></pre></div><h2 id="restarting-queue-workers"><a href="#restarting-queue-workers" class="header-anchor">#</a> Restarting Queue Workers</h2> <p>After <em>every</em> update you should restart the queue worker to ensure that the new code is loaded in and used.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan queue:restart
</code></pre></div><h2 id="exit-maintenance-mode"><a href="#exit-maintenance-mode" class="header-anchor">#</a> Exit Maintenance Mode</h2> <p>Now that the upgrade is complete, exit maintenance mode and your Panel will now be available.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Bring the Panel back up to receive connections.</span>
php artisan up
</code></pre></div><h2 id="switch-to-wings"><a href="#switch-to-wings" class="header-anchor">#</a> Switch to Wings</h2> <p>We've deprecated the old Node.js daemon in favor of <a href="https://github.com/pterodactyl/wings" target="_blank" rel="noopener noreferrer">Wings<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, our new server
control plane written in Go. This new system is significantly faster, easier to install, and much smaller. All you
need to do is install a single binary on your system and configure it to run on boot. <strong>You cannot use the old Node.js
Daemon to run servers with Pterodactyl Panel 1.0.</strong></p> <p>Please see <a href="/wings/1.0/migrating.html">Migrating to Wings</a> for instructions.</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/pterodactyl/documentation/edit/master/panel/1.0/legacy_upgrade.md" target="_blank" rel="noopener noreferrer">Help us improve this page.</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></div> <!----> </div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5c327c7a.js" defer></script><script src="/assets/js/4.2292f8c0.js" defer></script><script src="/assets/js/1.2845a406.js" defer></script><script src="/assets/js/67.5ff67096.js" defer></script>
  </body>
</html>
